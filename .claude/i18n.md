# Internationalization (i18n)

## CRITICAL RULE: NO HARDCODED STRINGS

**All user-facing text MUST come from translation files. Never hardcode strings.**

This applies to:
- UI text (labels, buttons, messages, placeholders)
- Error messages
- Success messages
- Loading states
- Email content
- Any text visible to users

## Translation Files

Located in `/content/messages/`:
- `en.json` - English translations
- `ka.json` - Georgian translations

## How to Use Translations

**In Client Components:**
```tsx
'use client'
import { useTranslations } from 'next-intl'

export function MyComponent() {
  const t = useTranslations('namespace')
  return <h1>{t('key')}</h1>
}
```

**In Server Components:**
```tsx
import { getTranslations } from 'next-intl/server'

export default async function Page() {
  const t = await getTranslations('namespace')
  return <h1>{t('key')}</h1>
}
```

**With Variables:**
```tsx
// In content/messages/en.json: "welcome": "Hello, {name}!"
t('welcome', { name: user.name })
```

## Translation Namespaces

- `common` - Shared UI strings (loading, save, cancel, etc.)
- `nav` - Navigation labels
- `auth.login` - Login page
- `auth.register` - Registration page
- `auth.forgotPassword` - Forgot password page
- `auth.resetPassword` - Reset password page
- `auth.verifyEmail` - Email verification page
- `auth.errors` - Authentication error messages
- `dashboard` - Dashboard page
- `profile` - Profile page
- `footer` - Footer links
- `home` - Home/landing page
- `languages` - Language names and switcher text

## Adding New Translations

1. Add the key to BOTH `content/messages/en.json` AND `content/messages/ka.json`
2. Use the appropriate namespace
3. Never leave a translation key in only one language file

## Button Loading States

The `Button` component accepts a `loadingText` prop for localized loading text:
```tsx
<Button loading={isLoading} loadingText={t('common.loading')}>
  {t('submit')}
</Button>
```

## Email System

### Language-Based Email Templates

Emails are sent in the user's preferred language (stored in `user.preferredLocale`).

**Template Location:** `/content/email-templates/`
- `verification-en.ts` - English verification email
- `verification-ka.ts` - Georgian verification email
- `password-reset-en.ts` - English password reset email
- `password-reset-ka.ts` - Georgian password reset email

**Why separate files instead of variable injection:**
- Better email deliverability
- Cleaner HTML without complex string interpolation
- Easier to maintain and preview
- Each language can have its own formatting/styling if needed

### Sending Emails

The email functions in `/src/lib/email.ts` accept a `locale` parameter:
```ts
await sendVerificationEmail(email, token, locale) // 'en' or 'ka'
await sendPasswordResetEmail(email, token, locale)
```

The locale is determined by:
1. User's `preferredLocale` from database (if user exists)
2. Current session locale (during registration)
3. Fallback to 'ka' (Georgian as default)

## Route Structure

### Locale-Based Routes

All user-facing routes are under `/[locale]/`:
- `/ka/dashboard` - Georgian dashboard
- `/en/dashboard` - English dashboard

### Route Groups

- `(public)` - Public pages (home, about, etc.) with PublicHeader/PublicFooter
- `(authenticated)` - Protected pages requiring login with AppHeader
- `auth/` - Authentication pages (login, register, etc.) with minimal header

## Admin Panel Exception

**Note:** The admin panel (`/admin/*`) is intentionally kept in English only.
- Admin users are expected to understand English
- This reduces maintenance overhead
- Admin-only components in `/src/components/admin/` do not require translation

## Bilingual Content Components

For page-specific content sections (not reusable UI), use **co-located bilingual components** instead of messages JSON.

**When to use messages JSON:**
- UI elements (buttons, labels, nav items, form fields)
- Short strings reused across pages
- Error/success messages

**When to use bilingual components:**
- Page sections with paragraphs of text
- Content that won't be reused elsewhere
- Sections with complex structure (lists, steps, cards)

### Component Pattern

```tsx
'use client'

import { useLocale } from 'next-intl'
import type { Locale } from '@/i18n/config'

const content: Record<Locale, {
  title: string
  description: string
}> = {
  ka: {
    title: 'Georgian title',
    description: 'Georgian description...',
  },
  en: {
    title: 'English title',
    description: 'English description...',
  },
}

export function MissionSection() {
  const locale = useLocale() as Locale
  const t = content[locale]

  return (
    <section>
      <h2>{t.title}</h2>
      <p>{t.description}</p>
    </section>
  )
}
```
